# 1.STM32 与 ESP01S 温湿度远程监控系统

## 项目简介

本项目是一个基于 STM32F103C8T6 最小核心板与 ESP01S 模块的温湿度远程监控系统，通过 DHT11 温湿度传感器采集环境数据，在本地 0.96 英寸 OLED 显示屏实时显示，同时借助 ESP01S 模块接入机智云平台，实现手机端远程监控功能，让使用者能够随时随地了解目标环境的温湿度状况。

## 系统架构

  * **主控模块** ：STM32F103C8T6 最小核心板，负责整体程序运行与各模块协调控制。
  * **传感器模块** ：DHT11 温湿度传感器，用于采集环境温湿度数据，输出数字信号便于 STM32 读取处理。
  * **显示模块** ：0.96 英寸 OLED 显示屏，与 STM32 连接，用于直观展示当前温湿度数值，方便本地查看。
  * **无线通信模块** ：ESP01S 模块，承担将采集数据通过 Wi-Fi 传输至机智云平台的任务，实现远程监控功能。

## 开发环境

采用 Keil 开发环境进行程序编写与调试，基于标准库开发，充分发挥其稳定、高效的特点，确保代码的兼容性与可靠性。

## 机智云平台接入

  * **设备接入** ：在机智云官网完成设备创建与注册，获取设备唯一标识与密钥，并在 STM32 程序中进行配置，使设备能够成功连接到机智云平台。
  * **数据上传** ：通过 ESP01S 模块，将采集到的温湿度数据按照机智云的通信协议格式进行封装，定时发送到机智云服务器。
  * **手机 APP 监控** ：在手机上安装机智云 APP，通过 APP 连接绑定设备，即可在手机端实时查看温湿度数据变化曲线、历史数据等信息，实现远程监控功能。

## 硬件连接

  * **STM32F103C8T6 与 DHT11 连接** ：DHT11 数据引脚接 STM32 GPIO 引脚，VCC 接 STM32 3.3V，GND 接地。
  * **STM32F103C8T6 与 OLED 连接** ：OLED SDA、SCL 引脚接 STM32 IIC 引脚，VCC 接 3.3V，GND 接地。
  * **STM32F103C8T6 与 ESP01S 连接** ：ESP01S TX 接 STM32 RX，ESP01S RX 接 STM32 TX，ESP01S VCC 经电压转换后接 STM32 3.3V，GND 接地。

## 软件设计

  * **STM32 程序** ：基于标准库编写，实现 DHT11 数据采集、OLED 显示驱动、ESP01S 通信控制等功能。通过定时器定期采集数据，显示在 OLED 上，并通过串口发送给 ESP01S。
  * **ESP01S 配置** ：在 STM32 程序中，通过串口向 ESP01S 发送 AT 指令，完成初始化配置，如设置 Wi-Fi 模式、连接无线路由器、建立与机智云服务器的 TCP/IP 连接等。

## 配置说明

  * **Wi-Fi 参数配置** ：根据实际使用路由器，在代码中修改 ESP01S 连接的 Wi-Fi 名称（SSID）和密码。
  * **机智云参数配置** ：在代码中设置设备在机智云平台的唯一标识、密钥以及服务器地址和端口号等参数。

## 使用说明

  1. 按硬件连接要求连接各模块。
  2. 在 Keil 开发环境下打开项目代码，根据实际引脚连接调整代码定义。
  3. 编译并下载程序到 STM32F103C8T6 最小核心板。
  4. 接通电源，系统运行后，OLED 显示温湿度数据，ESP01S 连接 Wi-Fi 并向机智云平台上传数据。
  5. 手机安装机智云 APP，连接绑定设备，即可远程查看温湿度数据。

## 项目拓展

  * **增加数据处理功能** ：在 STM32 程序中对采集数据进行滤波、平均等处理，提高数据准确性。
  * **实现远程控制功能** ：通过机智云平台向设备发送控制指令，实现对其他设备的远程控制，如控制风扇、空调等设备的开关。
  * **增加数据存储功能** ：使用外部存储芯片将历史数据存储，便于后续查询分析。

## 致谢

感谢开源社区中各位开发者分享的代码和经验，本项目在开发过程中借鉴了一些开源的 STM32 标准库代码、DHT11 和 OLED 的驱动代码以及 ESP01S 的通信示例代码，为项目的顺利完成提供了很大的帮助。同时，感谢机智云平台提供的稳定服务与便捷的开发接口，让本项目能够顺利实现手机端远程监控功能。
